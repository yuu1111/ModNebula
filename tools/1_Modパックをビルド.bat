@echo off
chcp 65001 >nul
echo ============================================================
echo   Modパックビルドツール
echo ============================================================
echo.
echo このツールはModパックをビルドします。
echo.
echo 【処理内容】
echo   - Modのjarファイルから情報を抽出
echo   - .link.json への情報転記
echo   - distribution.json の生成
echo.
echo 【重要】
echo   この処理を忘れると、Modが直リンク化されず、
echo   GitHubで再配布してしまうことになります。
echo   必ず実行してください！
echo.
echo ============================================================
echo.

pause

echo.
echo ============================================================
echo   ビルド実行中...
echo ============================================================
echo.

..\modnebula.exe generate distro

if %ERRORLEVEL% EQU 0 (
    echo.
    echo ============================================================
    echo   ビルド完了しました！
    echo ============================================================
    echo.
    echo   出力ファイル: %ROOT%\distribution.json
    echo.
    echo 【次のステップ】
    echo   Modパックを追加する場合:
    echo   - 「2_CurseForgeからインポート.bat」を実行
    echo.
    echo   テストする場合:
    echo   - 「3_ローカルサーバー起動.bat」を実行
    echo   - 「4_ランチャーテスト起動.bat」でテスト
    echo.
    echo ============================================================
) else (
    echo.
    echo ============================================================
    echo   エラー: ビルドに失敗しました
    echo ============================================================
    echo.
    echo   以下を確認してください:
    echo   - .envファイルが正しく設定されているか
    echo   - Java 17がインストールされているか
    echo   - JAVA_EXECUTABLEのパスが正しいか
    echo.
    echo ============================================================
)

pause
